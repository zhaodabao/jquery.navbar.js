/*! jQuery Navigation Bar Plugin v2.0.1
Licensed Zhao Chengjia - MIT License */
(function(d,f){var a={},e={id:{context:"jqnavbar",option:"navbar-options",itemData:"item-data",childStatus:"child-menu-status",blockOverIndex:"block-over-index"},event:{open:"navbar_openMenu",close:"navbar_closeMenu",autoClose:"navbar_autoCloseMenu"},className:{container:"navbar",nav:"nav",block:"block",cover:"cover",menu:"menu",item:"mitem",itemOn:"on",itemParent:"parent",itemDisabled:"disabled",itemIcon:"mitemicon"}},c={menu:null,skin:"bootstrap",event:{autoClose:"mousedown"},animation:{blockMove:"easeOutBack",blockMoveDuration:500,verticalExpand:"easeOutBack",verticalExpandDuration:300,verticalExpandDelay:100,verticalCollapse:f,verticalCollapseDuration:200,verticalCollapseDelay:100,horizontalExpand:"easeOutBack",horizontalExpandDuration:300,horizontalExpandDelay:300,horizontalCollapse:f,horizontalCollapseDuration:200,horizontalCollapseDelay:200}},b={init:function(g){return this.each(function(){var i=d(this),h=d.extend({},c,g);b.destory.call(i,null);i.data(e.id.option,h);b._generateIdentifier.call(i,null);b.addBar.call(i,h.menu||[]);b._autoCollapse.call(i,null)})},destory:function(){return this.each(function(){var h=d(this),g=h.data(e.id.option);if(!!g){h.removeData(e.id.option).children("."+e.className.container).remove();g.event.autoClose&&g._identifier&&d(document).unbind(g.event.autoClose+"."+e.id.context+g._identifier)}})},addBar:function(k){var j=this,g=j.data(e.id.option),h=e.className,i=d("<ul/>").addClass(h.nav).appendTo(d("<div/>").addClass(h.container+" "+g.skin).appendTo(j)).append(d("<li/>").addClass(h.block));d.each(k,function(n,l){!l.separator&&b.addBarItem.call(j,i,l)});i.bind("mouseleave",function(){var l=d(this);!g._menu_on&&l.children("."+h.block).stop(true,false).fadeOut(function(){d(this).css("opacity",0).hide();g._menu_on=false})});d.browser.msie&&i.bind("selectstart",function(){return false})},addMenu:function(j,i){var h=this,g=d("<ul/>").addClass(e.className.menu).appendTo(d("<div/>").addClass(e.className.cover).appendTo(j));d.each(i,function(l,k){k.separator?b.addSeparator.call(h,g,k):b.addMenuItem.call(h,g,k)})},addBarItem:function(k,g){var l=this,i=l.data(e.id.option),j=e.className,h=e.event,n=b.addItem.call(l,g).appendTo(k);n.bind(h.open,b.expand).bind(h.close,b.collapse).bind("mouseenter",function(){var m=d(this),p=k.children("."+j.block).data(e.id.blockOverIndex,m.index());if(p.is(":hidden")){b._disabledBlock.call(p,!!b.isDisabled.call(l,m));p.css({width:m.outerWidth(),left:m.position().left,opacity:0}).show().stop(true,false).animate({opacity:1},function(){d(this).css("opacity",1)})}else{var q={width:m.outerWidth(),left:m.position().left},o=i.animation;m.siblings().each(function(){var s=d(this),r=s.children("."+j.cover);if(r.is(":visible")){s.trigger(h.close,i);return false}});!b.isDisabled.call(l,m)&&b._disabledBlock.call(p,false);if(b.isDisabled.call(l,m)){b._disabledBlock.call(p,true)}else{if(i._menu_on){m.trigger(h.open,i)}}p.stop(true,false).css("opacity",1).animate(q,o.blockMoveDuration,o.blockMove,function(){d(this).css(q)})}}).bind("click",function(){var m=d(this),o=m.children("."+j.cover),p=m.data(e.id.itemData);if(b.isDisabled.call(l,m)){}else{if(o.length){m.trigger((i._menu_on=!i._menu_on)?h.open:h.close,i)}else{i._menu_on=false;d.isFunction(p.action)&&p.action.call(m,p)}}return false})},addMenuItem:function(k,g){var l=this,i=l.data(e.id.option),j=e.className,h=e.event,n=b.addItem.call(l,g).appendTo(k);n.bind(h.open,b.expandMenu).bind(h.close,b.collapseMenu).bind("mouseenter",function(){var m=d(this).addClass(j.itemOn);!b.isDisabled.call(l,m)&&m.trigger(h.open,i)}).bind("mouseleave",function(){d(this).removeClass(j.itemOn).trigger(h.close,i)}).bind("click",function(){var o=d(this),p=o.children("."+j.cover),q=o.data(e.id.itemData);if(b.isDisabled.call(l,o)){}else{if(!p.length){d.isFunction(q.action)&&q.action.call(o,q);var m=o.parents("li."+j.item);m.each(function(r,t){var u=d(t),s=null;u.removeClass(j.itemOn);s=(r+1!==m.length)?{time:0,delay:0}:{};u.trigger(h.close,[i,s])});i._menu_on=false;o.parents("ul."+j.nav+":first").trigger("mouseleave")}}return false})},addItem:function(g){if(!g){return null}var i=this,h=e.className,j=d("<li/>").addClass(h.item);if(!g.icon){d("<label/>").appendTo(j)}else{d("<img/>").addClass(h.itemIcon).attr("src",g.icon).appendTo(j)}g.text&&d("<a/>").text(g.text).appendTo(j);if(g.children&&g.children.length){j.addClass(h.itemParent).append("<span/>");b.addMenu.call(i,j,g.children)}j.data(e.id.itemData,g);b.item.call(i,g.id,j);g.disabled&&b._disabledItem.call(j,true);return j},addSeparator:function(h,g){g&&g.separator&&d("<li/>").addClass("separator").append("<hr/>").appendTo(h)},item:function(j,i){var g=this.data(e.id.option),h=g._itemElementIndex||(g._itemElementIndex={});if(arguments.length===1){return(j instanceof d&&j.is("."+e.className.item))?j:h[j]}else{if(j&&i){h[j]=i}}},close:function(l){var i=e.className,h=e.event.close;if(arguments.length===1&&!!l){var j=d(this),g=j.data(e.id.option),k=b.item.call(j,l);
return k.each(function(){var m=d(this);m.parent().is("ul."+i.nav)&&(g._menu_on=false);m.trigger(h,g)})}else{return this.each(function(){var o=d(this),m=o.data(e.id.option),n=o.children("."+i.container).children("ul."+i.nav);m._menu_on=false;n.children("li."+i.item).each(function(){d(this).trigger(h,m)})})}},expand:function(j,h,l){var i=e.className,n=h.animation,m=d(this),p=m.children("."+i.cover),k=d.extend({type:n.verticalExpand,delay:n.verticalExpandDelay,duration:n.verticalExpandDuration},l);if(p.length&&m.data(e.id.childStatus)!=="open"){m.data(e.id.childStatus,"open").addClass(i.itemOn);var g=p.children(),o=p.height();g.css({top:-o-10});p.css({height:o+80,overflow:"hidden"}).show();g.stop(true,false).delay(k.delay).animate({top:0},k.duration,k.type,function(){d(this).css({height:"",top:0});p.css({height:"",overflow:"visible"})})}return false},collapse:function(j,h,l){var i=e.className,n=h.animation,m=d(this),p=m.children("."+i.cover),k=d.extend({type:n.verticalCollapse,delay:n.verticalCollapseDelay,duration:n.verticalCollapseDuration},l);if(p.length&&m.data(e.id.childStatus)!=="close"){m.data(e.id.childStatus,"close").removeClass(i.itemOn);var g=p.children(),o=p.height();p.css({overflow:"hidden"});g.stop(true,false).delay(k.delay).animate({top:-o-10},k.duration,k.type,function(){p.css({height:""}).hide()})}return false},expandMenu:function(k,h,m){var j=e.className,o=h.animation,n=d(this),p=n.children("."+j.cover),l=d.extend({type:o.horizontalExpand,delay:o.horizontalExpandDelay,duration:o.horizontalExpandDuration},m);if(p.length&&n.data(e.id.childStatus)!=="open"){n.data(e.id.childStatus,"open");var g=p.children(),i=p.width();g.css({left:-i-10});p.css({width:i+50,overflow:"hidden"}).show();g.stop(true,false).delay(l.delay).animate({left:0},l.duration,l.type,function(){d(this).css({width:"",left:0});p.css({width:"",overflow:"visible"})})}return false},collapseMenu:function(k,h,m){var j=e.className,o=h.animation,n=d(this),p=n.children("."+j.cover),l=d.extend({type:o.horizontalCollapse,delay:o.horizontalCollapseDelay,duration:o.horizontalCollapseDuration},m);if(p.length&&n.data(e.id.childStatus)!=="close"){n.data(e.id.childStatus,"close");var g=p.children(),i=p.width();p.css({overflow:"hidden"});g.stop(true,false).delay(l.delay).animate({left:-i-10},l.duration,l.type,function(){p.css({width:""}).hide()})}return false},disabled:function(h,g){return this.each(function(){var i=d(this),k=b.item.call(i,h),j=function(l){var m=i.children("."+e.className.container).children("ul."+e.className.nav).children("."+e.className.block);if(k.parent().is("."+e.className.nav)&&k.index()===m.data(e.id.blockOverIndex)){b._disabledBlock.call(m,l);return true}return false};if(k&&b.isDisabled.call(i,k)!==g){if(g){b._disabledItem.call(k,true);j(true);b.close.call(i,k)}else{b._disabledItem.call(k,false);if(j(false)){k.trigger("mouseenter")}else{k.is("."+e.className.itemOn)&&k.trigger("mouseenter")}}}})},isDisabled:function(h){var g=(h instanceof d&&h.is("."+e.className.item))?h:b.item.call(this,h);return g&&g.length?g.is("."+e.className.itemDisabled):this},text:function(h,g){return this.each(function(){var i=b.item.call(d(this),h);i.data(e.id.itemData).text=g;i&&i.children("a").text(g)})},icon:function(h,g){return this.each(function(){var i=d(this),j=b.item.call(i,h);j.data(e.id.itemData).icon=g;j&&j.children("img."+e.className.itemIcon).attr("src",g);!!b.isDisabled.call(i,j)&&b._disabledItem.call(j,true)})},_disabledBlock:function(g){g?d(this).addClass(e.className.itemDisabled):d(this).removeClass(e.className.itemDisabled)},_disabledItem:function(i){var j=d(this),h=j.children("img."+e.className.itemIcon),g=j.data(e.id.itemData);if(i){j.addClass(e.className.itemDisabled);!d.support.cssFilter&&h.length&&b._grayscale(h)}else{j.removeClass(e.className.itemDisabled);h.length&&h.attr("src",g.icon)}},_autoCollapse:function(){var i=this,h=i.data(e.id.option);if(h.event.autoClose&&h._identifier){var g=h.event.autoClose+"."+e.id.context+h._identifier;i.bind(g,h,function(k){var j=k.data;i.parent().trigger(j.event.autoClose,j._identifier);return false});d(document).bind(g,i,function(l,m){var j=l.data,k=j.data(e.id.option);if(k._identifier!=m){b.close.call(j,null);j.children("."+e.className.container).children("ul."+e.className.nav).trigger("mouseleave")}})}},_grayscale:function(g){var n=Array.prototype.slice.call(g)[0],h=null,k=document.createElement("canvas"),r=k.getContext("2d"),j=g.width(),q=g.height();k.width=j;k.height=q;r.drawImage(n,0,0);h=r.getImageData(0,0,j,q);for(var o=0;o<h.height;o++){for(var p=0;p<h.width;p++){var l=(o*4)*h.width+p*4,m=(h.data[l]+h.data[l+1]+h.data[l+2])/3;h.data[l]=m;h.data[l+1]=m;h.data[l+2]=m}}r.putImageData(h,0,0,0,0,h.width,h.height);g.attr("src",k.toDataURL())},_generateIdentifier:function(){var g=this.data(e.id.option),h=new Date().getTime();while(a[h]){h++}a[h]=true;g._identifier=h}};d.fn.extend({navbar:function(){var g=arguments[0];if(b[g]){return b[g].apply(this,Array.prototype.slice.call(arguments,1))
}else{if(typeof g==="object"||!g){return b.init.apply(this,arguments)}else{d.error("Method "+g+" does not exist in jquery.navbar");return this}}}});d.browser=function(){var h={},i=navigator.userAgent.toLowerCase(),g=function(){var k=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[];return{browser:k[1]||"",version:k[2]||"0"}}();if(g.browser){h[g.browser]=true;h.version=g.version}if(h.chrome){h.webkit=true}else{if(h.webkit){h.safari=true;if(/version\/(\S+)/i.test(i)){h.version=RegExp["$1"]}else{var j="1";if(Number(h.version)<100){j="1"}else{if(Number(h.version)<312){j="1.2"}else{if(Number(h.version)<412){j="1.3"}else{j="2"}}}h.version=j}}else{if(h.mozilla){if(/FireFox\/(\S+)/i.test(i)){h.version=RegExp["$1"]}else{if(!!(i.match(/trident/)&&(i.match(/rv 11/)||i.match(/rv:11/)))){delete h.mozilla;h.msie=true;h.version="11.0"}}}}}return h}();d.support.cssFilter=function(){var g=document.createElement("div");g.style.cssText=(true?"-webkit-":"")+"filter: blur(2px)";return(g.style.length!=0)&&(document.documentMode===f||document.documentMode<=9)}()})(jQuery);